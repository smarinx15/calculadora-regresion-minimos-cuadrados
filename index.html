<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RegreCalc - Calculadora de Regresi√≥n Polin√≥mica</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.1/math.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
    <header>
        <h1>üìä RegreCalc</h1>
        <p class="subtitle">Calculadora Interactiva de Regresi√≥n Polin√≥mica</p>
        <p class="description">
            Herramienta educativa para visualizar y comprender el <strong>m√©todo de m√≠nimos cuadrados</strong> 
            aplicado a regresi√≥n polin√≥mica mediante <strong>√°lgebra lineal</strong>.
        </p>
    </header>

    <div class="container">
        <!-- PANEL IZQUIERDO: GR√ÅFICA -->
        <div class="left-panel">
            <div id="grafica" class="graph-container"></div>
            
            <div class="graph-instructions">
                <p>üí° <strong>C√≥mo usar la aplicaci√≥n:</strong></p>
                <ul>
                    <li><strong>Agregar puntos:</strong> Haz clic en la gr√°fica o usa los campos de la derecha</li>
                    <li><strong>Cambiar grado:</strong> Selecciona el grado del polinomio (1=l√≠nea, 2=par√°bola, 3=c√∫bica...)</li>
                    <li><strong>Calcular:</strong> El algoritmo encuentra la curva que mejor se ajusta a tus puntos</li>
                    <li><strong>Explorar:</strong> Observa todas las matrices y operaciones del proceso matem√°tico</li>
                </ul>
            </div>
        </div>

        <!-- PANEL DERECHO: CONTROLES Y RESULTADOS -->
        <div class="right-panel">
            <!-- CARD 1: CONTROLES -->
            <div class="card">
                <h2>üéõÔ∏è Configuraci√≥n del Modelo</h2>
                
                <div class="explicacion">
                    <strong>¬øQu√© es el grado del polinomio?</strong><br>
                    Es la potencia m√°s alta de X en la ecuaci√≥n. Grado 1 = l√≠nea recta, 
                    Grado 2 = par√°bola, Grado 3 = c√∫bica. A mayor grado, mayor flexibilidad 
                    de la curva, pero cuidado con el sobreajuste.
                </div>

                <div class="control-group">
                    <label for="input-grado">Grado del Polinomio:</label>
                    <input type="number" id="input-grado" min="1" max="10" value="2">
                    <span class="hint">(Recomendado: 1-4 para la mayor√≠a de casos)</span>
                </div>

                <div class="button-group">
                    <button id="btn-calcular" class="btn-primary">Calcular Regresi√≥n</button>
                    <button id="btn-limpiar" class="btn-secondary">Limpiar Todo</button>
                </div>
            </div>

            <!-- CARD 2: AGREGAR PUNTOS -->
            <div class="card">
                <h2>‚ûï Agregar Datos</h2>
                
                <div class="explicacion">
                    <strong>Ingresa las coordenadas (X, Y)</strong> de tus datos. 
                    Necesitas al menos <strong>grado + 1</strong> puntos. Por ejemplo, 
                    para una par√°bola (grado 2) necesitas m√≠nimo 3 puntos.
                </div>

                <div class="add-point-controls">
                    <div class="input-group">
                        <label for="input-x-manual">Coordenada X:</label>
                        <input type="number" id="input-x-manual" step="0.1" placeholder="Ej: 1.5">
                    </div>
                    <div class="input-group">
                        <label for="input-y-manual">Coordenada Y:</label>
                        <input type="number" id="input-y-manual" step="0.1" placeholder="Ej: 3.2">
                    </div>
                </div>
                <button id="btn-agregar-punto" class="btn-primary" style="width: 100%; margin-top: 10px;">
                    ‚úÖ Agregar Punto
                </button>
            </div>

            <!-- CARD 3: PUNTOS INGRESADOS -->
            <div class="card">
                <h2>üìç Puntos Ingresados</h2>
                
                <div class="explicacion">
                    Estos son los <strong>datos observados</strong> que usaremos para encontrar 
                    la funci√≥n que mejor los aproxima.
                </div>

                <div id="lista-puntos" class="points-list">
                    <p class="empty-message">
                        No hay puntos a√∫n. Agr√©galos arriba o haz clic en la gr√°fica.
                    </p>
                </div>
            </div>

            <!-- CARD 4: RESULTADOS -->
            <div class="card">
                <h2>üìà Resultados del Ajuste</h2>
                
                <div class="explicacion">
                    <strong>Ecuaci√≥n:</strong> Es la funci√≥n matem√°tica que mejor representa tus datos.<br>
                    <strong>Coeficientes (Œ≤):</strong> Son los valores calculados con la f√≥rmula Œ≤ = (X·µÄX)‚Åª¬πX·µÄy<br>
                    <strong>Error (MSE):</strong> Promedio de los errores al cuadrado. M√°s cercano a 0 = mejor ajuste.
                </div>

                <div id="resultados" class="results">
                    <p class="empty-message">
                        Agrega puntos y presiona "Calcular Regresi√≥n"
                    </p>
                </div>
            </div>

            <!-- CARD 5: DETALLES MATEM√ÅTICOS -->
            <div class="card">
                <h2 class="collapsible" id="toggle-detalles">
                    üßÆ Proceso Matem√°tico Completo
                    <span class="toggle-icon">‚ñº</span>
                </h2>
                
                <div id="detalles-contenido" class="oculto">
                    <div class="explicacion">
                        Aqu√≠ puedes ver <strong>todas las operaciones</strong> del algoritmo de m√≠nimos cuadrados:
                        <br><br>
                        <strong>1. Matriz X:</strong> Contiene [1, x, x¬≤, x¬≥...] para cada punto<br>
                        <strong>2. X·µÄ:</strong> Transpuesta de X (intercambia filas por columnas)<br>
                        <strong>3. X·µÄX:</strong> Producto matricial de X·µÄ por X<br>
                        <strong>4. (X·µÄX)‚Åª¬π:</strong> Inversa de X·µÄX (operaci√≥n clave)<br>
                        <strong>5. X·µÄy:</strong> Producto de X·µÄ por el vector de valores Y<br>
                        <strong>6. Œ≤:</strong> Coeficientes finales = (X·µÄX)‚Åª¬π ¬∑ X·µÄy
                    </div>
                    
                    <div id="detalles-matrices" class="math-details">
                        <p class="empty-message">Calcula una regresi√≥n para ver los detalles</p>
                    </div>
                </div>
            </div>

            <!-- CARD 6: PREDICCI√ìN -->
            <div class="card">
                <h2>üîÆ Hacer Predicciones</h2>
                
                <div class="explicacion">
                    Una vez calculada la regresi√≥n, puedes <strong>predecir el valor de Y</strong> 
                    para cualquier valor de X usando la ecuaci√≥n encontrada.
                </div>

                <div class="prediction-controls">
                    <div>
                        <label for="input-prediccion">Valor de X para predecir:</label>
                        <input type="number" id="input-prediccion" step="0.1" placeholder="Ej: 5.0">
                    </div>
                    <button id="btn-predecir" class="btn-primary">Predecir</button>
                </div>
                <div id="resultado-prediccion" class="prediction-result"></div>
            </div>
        </div>
    </div>

    <script src="math.js"></script>
    <script src="app.js"></script>
</body>
</html>